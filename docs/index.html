<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IRL</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#141414;color:#fff}
    header{background:#000;padding:10px 40px;display:flex;align-items:center;height:70px}
    header img{height:100%;width:auto;object-fit:contain;display:block;transition:filter .4s,transform .4s}
    header img:hover{filter:drop-shadow(0 0 12px #FF6B00) brightness(1.2);transform:scale(1.05);cursor:pointer}
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:30px;padding:40px;max-width:1600px;margin:auto}
    .video-card{display:flex;flex-direction:column;align-items:center;background:#1c1c1c;border-radius:8px;overflow:hidden;transition:transform .3s,box-shadow .3s;cursor:pointer}
    .video-card img{width:100%;height:250px;object-fit:cover;display:block}
    .video-card:hover{transform:scale(1.08);box-shadow:0 8px 25px rgba(0,0,0,.7);z-index:2}
    .video-title{padding:12px;font-size:16px;font-weight:600;text-align:center;color:#ddd}
    #videoFrame{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);justify-content:center;align-items:center;z-index:1000;flex-direction:column}
    #closeBtn{position:absolute;top:20px;right:40px;font-size:36px;color:#fff;cursor:pointer;transition:color .3s}
    #closeBtn:hover{color:#FF6B00}
    #videoContainer{display:flex;width:90%;max-width:1400px;height:90%;gap:20px}
    #videoPlayer{flex:7;border-radius:8px;background:#000}
    #chatPanel{flex:3;background:#1c1c1c;color:#888;display:flex;justify-content:center;align-items:center;border-radius:8px;font-size:20px;font-weight:600;text-align:center}
    @media (max-width:900px){
      .gallery{grid-template-columns:repeat(2,1fr)}
      #videoContainer{flex-direction:column;height:auto}
      #videoPlayer,#chatPanel{width:100%;height:50vh}
    }
    @media (max-width:600px){
      .gallery{grid-template-columns:1fr}
      header{height:60px;padding:10px 20px}
      header img{height:100%}
    }
  </style>
</head>
<body>
  <!-- Header with logo (relative path to assets/logo.png) -->
  <header>
    <img src="./assets/logo.png" alt="IRL Logo" title="IRL Home" onclick="location.reload()" />
  </header>

  <!-- Gallery -->
  <div class="gallery" id="gallery"></div>

  <!-- Overlay -->
  <div id="videoFrame">
    <span id="closeBtn">&times;</span>
    <div id="videoContainer">
      <iframe id="videoPlayer" src="" allowfullscreen></iframe>
      <div id="chatPanel">Chat unavailable.</div>
    </div>
  </div>

  <script>
    // === configure videos and point thumbnails to local assets/ files ===
    const videos = [
      { title: "The First Adventure", thumbnail: "./assets/thumb1.jpg", link: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
      { title: "Mystery Night",      thumbnail: "./assets/thumb2.jpg", link: "https://www.youtube.com/embed/ScMzIvxBSi4"  },
      { title: "Comedy Hour",        thumbnail: "./assets/thumb3.jpg", link: "https://www.youtube.com/embed/tgbNymZ7vqY"  }
      // add more entries here
    ];

    const SHOW_TITLES = true;
    const gallery = document.getElementById("gallery");

    videos.forEach(video => {
      const card = document.createElement("div");
      card.className = "video-card";

      const img = document.createElement("img");
      img.src = video.thumbnail;
      img.alt = video.title || "Video thumbnail";
      img.onclick = () => openVideo(video.link);
      card.appendChild(img);

      if (SHOW_TITLES && video.title) {
        const title = document.createElement("div");
        title.className = "video-title";
        title.textContent = video.title;
        card.appendChild(title);
      }

      gallery.appendChild(card);
    });

    const overlay = document.getElementById('videoFrame');
    const iframe = document.getElementById('videoPlayer');
    const closeBtn = document.getElementById('closeBtn');

    function openVideo(url){
      let embedUrl = url;
      if(url.includes("youtube.com/embed/")){
        embedUrl += (url.includes("?") ? "&" : "?") + "controls=0&modestbranding=1&rel=0&autoplay=1";
      } else if(url.includes("player.vimeo.com/video/")){
        embedUrl += (url.includes("?") ? "&" : "?") + "autoplay=1";
      }
      // set src and show overlay
      iframe.src = embedUrl;
      overlay.style.display = 'flex';

      // iframe error fallback (e.g., YouTube Error 153)
      iframe.onerror = () => {
        // hide iframe and show a friendly message inside chatPanel area
        iframe.style.display = "none";
        const fallback = document.createElement('div');
        fallback.style.color = "#fff";
        fallback.style.textAlign = "center";
        fallback.innerHTML = "This video can't be played here. <br> Try viewing it on YouTube.";
        // temporarily replace chatPanel contents (preserve existing panel)
        const panel = document.getElementById('chatPanel');
        panel.innerHTML = "";
        panel.appendChild(fallback);
      };
    }

    function closeVideo(){
      iframe.src = "";
      iframe.style.display = "";
      // restore chatPanel default text if needed
      const panel = document.getElementById('chatPanel');
      panel.textContent = "Chat unavailable.";
      overlay.style.display = 'none';
    }

    // close behaviors
    overlay.addEventListener('click', e => { if(e.target === overlay) closeVideo(); });
    document.addEventListener('keydown', e => { if(e.key === "Escape") closeVideo(); });
    closeBtn.addEventListener('click', closeVideo);
  </script>
</body>
</html>
